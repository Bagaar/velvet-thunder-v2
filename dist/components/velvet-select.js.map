{"version":3,"file":"velvet-select.js","sources":["../../src/components/velvet-select.hbs","../../src/components/velvet-select.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{! @glint-nocheck }}\\n{{! Needs https://github.com/embroider-build/embroider/pull/1367 to remove `@glint-nocheck`. }}\\n\\n<select\\n  class={{-velvet/class-list\\n    \\\"velvet-select\\\"\\n    (concat \\\"velvet-select-\\\" (or @size \\\"md\\\"))\\n    (concat \\\"velvet-select-\\\" (or @variant \\\"primary\\\"))\\n    (if @isInvalid \\\"velvet-select-invalid\\\")\\n    (if @isPill \\\"velvet-select-pill\\\")\\n    (if @isDisabled \\\"velvet-select-disabled\\\")\\n    (if this.shouldDisplayPlaceholder \\\"velvet-select-placeholder\\\")\\n    \\\"form-select\\\"\\n  }}\\n  disabled={{@isDisabled}}\\n  {{on \\\"change\\\" this.changeHandler}}\\n  ...attributes\\n>\\n  {{#if this.shouldDisplayPlaceholder}}\\n    <option disabled selected={{true}}>\\n      {{@placeholder}}\\n    </option>\\n  {{/if}}\\n  {{yield\\n    (hash\\n      Option=(component\\n        (ensure-safe-component this.VelvetSelectOption)\\n        privateOnCreate=this.addOption\\n        privateOnDestroy=this.removeOption\\n        privateSelected=@selected\\n      )\\n    )\\n  }}\\n</select>\")","import Component from \"@glimmer/component\";\nimport type { WithBoundArgs } from \"@glint/template\";\nimport VelvetSelectOption from \"./velvet-select/option.ts\";\n\ninterface VelvetSelectSignature {\n  Args: {\n    /// Indicate if the select is disabled.\n    /// @default [false]\n    isDisabled?: boolean;\n    /// Indicate if the select is invalid.\n    /// @default [false]\n    isInvalid?: boolean;\n    /// Indicate if the select is pill shaped.\n    /// @default [false]\n    isPill?: boolean;\n    /// Handle the select's `change` event.\n    /// @default [undefined]\n    onChange?: (selected: unknown, event: Event) => void;\n    /// The placeholder of the select.\n    /// @default [\"\"]\n    placeholder?: string;\n    /// The selected option of the select.\n    /// @default [undefined]\n    selected?: unknown;\n    /// The size of the select.\n    /// @default [\"md\"]\n    size?: \"sm\" | \"md\" | \"lg\";\n    /// The appearance of the select.\n    /// @default [\"primary\"]\n    variant?: string | \"primary\";\n  };\n  Blocks: {\n    default: [\n      {\n        Option: WithBoundArgs<\n          typeof VelvetSelectOption,\n          \"privateOnCreate\" | \"privateOnDestroy\" | \"privateSelected\"\n        >;\n      }\n    ];\n  };\n  Element: HTMLSelectElement;\n}\n\nexport default class VelvetSelect extends Component<VelvetSelectSignature> {\n  options = new Map();\n  VelvetSelectOption = VelvetSelectOption;\n\n  get hasSelection() {\n    return this.args.selected !== undefined && this.args.selected !== null;\n  }\n\n  get shouldDisplayPlaceholder() {\n    return Boolean(this.args.placeholder) && this.hasSelection === false;\n  }\n\n  changeHandler = (event: Event) => {\n    const { isDisabled, onChange } = this.args;\n\n    if (typeof onChange !== \"function\" || isDisabled === true) {\n      return;\n    }\n\n    onChange(\n      this.options.get((event.target as HTMLSelectElement).value),\n      event\n    );\n  };\n\n  addOption = (id: string, value: unknown) => {\n    this.options.set(id, value);\n  };\n\n  removeOption = (id: string) => {\n    this.options.delete(id);\n  };\n}\n"],"names":["VelvetSelect","Component","constructor","args","_defineProperty","Map","VelvetSelectOption","event","isDisabled","onChange","options","get","target","value","id","set","delete","hasSelection","selected","undefined","shouldDisplayPlaceholder","Boolean","placeholder","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;AACA,eAAe,kBAAkB,CAAC,4+BAA4+B;;AC2C//B,MAAMA,YAAY,SAASC,SAAS,CAAwB;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,CAC/D,IAAA,EAAA,SAAA,EAAA,IAAIC,GAAG,EAAE,CAAA,CAAA;AAAAD,IAAAA,eAAA,6BACEE,kBAAkB,CAAA,CAAA;IAAAF,eAAA,CAAA,IAAA,EAAA,eAAA,EAUtBG,KAAY,IAAK;MAChC,MAAM;QAAEC,UAAU;AAAEC,QAAAA,QAAAA;OAAU,GAAG,IAAI,CAACN,IAAI,CAAA;MAE1C,IAAI,OAAOM,QAAQ,KAAK,UAAU,IAAID,UAAU,KAAK,IAAI,EAAE;AACzD,QAAA,OAAA;AACF,OAAA;AAEAC,MAAAA,QAAQ,CACN,IAAI,CAACC,OAAO,CAACC,GAAG,CAAEJ,KAAK,CAACK,MAAM,CAAuBC,KAAK,CAAC,EAC3DN,KACF,CAAC,CAAA;KACF,CAAA,CAAA;AAAAH,IAAAA,eAAA,CAEW,IAAA,EAAA,WAAA,EAAA,CAACU,EAAU,EAAED,KAAc,KAAK;MAC1C,IAAI,CAACH,OAAO,CAACK,GAAG,CAACD,EAAE,EAAED,KAAK,CAAC,CAAA;KAC5B,CAAA,CAAA;IAAAT,eAAA,CAAA,IAAA,EAAA,cAAA,EAEeU,EAAU,IAAK;AAC7B,MAAA,IAAI,CAACJ,OAAO,CAACM,MAAM,CAACF,EAAE,CAAC,CAAA;KACxB,CAAA,CAAA;AAAA,GAAA;EA3BD,IAAIG,YAAYA,GAAG;AACjB,IAAA,OAAO,IAAI,CAACd,IAAI,CAACe,QAAQ,KAAKC,SAAS,IAAI,IAAI,CAAChB,IAAI,CAACe,QAAQ,KAAK,IAAI,CAAA;AACxE,GAAA;EAEA,IAAIE,wBAAwBA,GAAG;AAC7B,IAAA,OAAOC,OAAO,CAAC,IAAI,CAAClB,IAAI,CAACmB,WAAW,CAAC,IAAI,IAAI,CAACL,YAAY,KAAK,KAAK,CAAA;AACtE,GAAA;AAsBF,CAAA;AAACM,oBAAA,CAAAC,QAAA,EAhCoBxB,YAAY,CAAA;;;;"}