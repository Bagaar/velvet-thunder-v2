{"version":3,"file":"velvet-checkbox.js","sources":["../../src/components/velvet-checkbox.hbs","../../src/components/velvet-checkbox.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"<label\\n  class={{-velvet/class-list\\n    \\\"velvet-checkbox\\\"\\n    (concat \\\"velvet-checkbox-\\\" (or @size \\\"md\\\"))\\n    (if @isDisabled \\\"velvet-checkbox-disabled\\\")\\n  }}\\n>\\n  <input\\n    checked={{if @privateInGroup this.isCheckedInGroup @isChecked}}\\n    class=\\\"velvet-checkbox-input form-checkbox\\\"\\n    disabled={{@isDisabled}}\\n    indeterminate={{@isIndeterminate}}\\n    name={{@name}}\\n    type=\\\"checkbox\\\"\\n    {{on \\\"change\\\" this.changeHandler}}\\n    ...attributes\\n  />\\n  {{yield}}\\n</label>\")","import Component from \"@glimmer/component\";\nimport type {\n  Value as GroupValue,\n  ValueAsArray as GroupValueAsArray,\n  ValueAsObject as GroupValueAsObject,\n} from \"./velvet-checkbox-group.ts\";\n\nexport type Size = \"sm\" | \"md\" | \"lg\";\n\ninterface VelvetCheckboxSignature {\n  Args: {\n    /// Indicate if the checkbox is checked.\n    /// @default [false]\n    isChecked?: boolean;\n    /// Indicate if the checkbox is disabled.\n    /// @default [false]\n    isDisabled?: boolean;\n    /// Indicate if the checkbox is indeterminate.\n    /// @default [false]\n    isIndeterminate?: boolean;\n    /// The name of the checkbox.\n    /// @default [\"\"]\n    name?: string;\n    /// Handle the checkbox's `change` event.\n    /// @default [undefined]\n    onChange?: (value: boolean, event: Event) => void;\n    /// The size of the checkbox.\n    /// @default [\"md\"]\n    size?: Size;\n\n    privateGroupValue?: GroupValue;\n    privateGroupValueIsObject?: boolean;\n    privateInGroup?: boolean;\n    privateOnChangeGroup?: (value: GroupValue, event: Event) => void;\n  };\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLInputElement;\n}\n\nexport default class VelvetCheckbox extends Component<VelvetCheckboxSignature> {\n  get groupValueAsArray() {\n    return (this.args.privateGroupValue || []) as GroupValueAsArray;\n  }\n\n  get groupValueAsObject() {\n    return (this.args.privateGroupValue || {}) as GroupValueAsObject;\n  }\n\n  get isCheckedInGroup() {\n    const name = this.args.name as string;\n\n    if (this.args.privateGroupValueIsObject) {\n      return this.groupValueAsObject[name] === true;\n    }\n\n    return this.groupValueAsArray.includes(name);\n  }\n\n  changeHandler = (event: Event) => {\n    if (this.args.isDisabled === true) {\n      return;\n    }\n\n    const { checked } = event.target as HTMLInputElement;\n    const { privateInGroup, onChange, privateOnChangeGroup } = this.args;\n\n    if (privateInGroup && typeof privateOnChangeGroup === \"function\") {\n      const { groupValueAsArray, groupValueAsObject } = this;\n      const { privateGroupValueIsObject, name } = this.args;\n\n      let groupValue;\n\n      if (privateGroupValueIsObject) {\n        groupValue = { ...groupValueAsObject, [name as string]: checked };\n      } else if (checked) {\n        groupValue = [...groupValueAsArray, name];\n      } else {\n        groupValue = groupValueAsArray.filter((n) => n !== name);\n      }\n\n      privateOnChangeGroup(groupValue as GroupValue, event);\n    } else if (typeof onChange === \"function\") {\n      onChange(checked, event);\n    }\n  };\n}\n"],"names":["VelvetCheckbox","Component","constructor","args","_defineProperty","event","isDisabled","checked","target","privateInGroup","onChange","privateOnChangeGroup","groupValueAsArray","groupValueAsObject","privateGroupValueIsObject","name","groupValue","filter","n","privateGroupValue","isCheckedInGroup","includes","setComponentTemplate","TEMPLATE"],"mappings":";;;;;AACA,eAAe,kBAAkB,CAAC,6fAA6f;;ACwChhB,MAAMA,cAAc,SAASC,SAAS,CAA0B;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;IAAAC,eAAA,CAAA,IAAA,EAAA,eAAA,EAmB5DC,KAAY,IAAK;AAChC,MAAA,IAAI,IAAI,CAACF,IAAI,CAACG,UAAU,KAAK,IAAI,EAAE;AACjC,QAAA,OAAA;AACF,OAAA;MAEA,MAAM;AAAEC,QAAAA,OAAAA;OAAS,GAAGF,KAAK,CAACG,MAA0B,CAAA;MACpD,MAAM;QAAEC,cAAc;QAAEC,QAAQ;AAAEC,QAAAA,oBAAAA;OAAsB,GAAG,IAAI,CAACR,IAAI,CAAA;AAEpE,MAAA,IAAIM,cAAc,IAAI,OAAOE,oBAAoB,KAAK,UAAU,EAAE;QAChE,MAAM;UAAEC,iBAAiB;AAAEC,UAAAA,kBAAAA;AAAmB,SAAC,GAAG,IAAI,CAAA;QACtD,MAAM;UAAEC,yBAAyB;AAAEC,UAAAA,IAAAA;SAAM,GAAG,IAAI,CAACZ,IAAI,CAAA;AAErD,QAAA,IAAIa,UAAU,CAAA;AAEd,QAAA,IAAIF,yBAAyB,EAAE;AAC7BE,UAAAA,UAAU,GAAG;AAAE,YAAA,GAAGH,kBAAkB;AAAE,YAAA,CAACE,IAAI,GAAaR,OAAAA;WAAS,CAAA;SAClE,MAAM,IAAIA,OAAO,EAAE;AAClBS,UAAAA,UAAU,GAAG,CAAC,GAAGJ,iBAAiB,EAAEG,IAAI,CAAC,CAAA;AAC3C,SAAC,MAAM;UACLC,UAAU,GAAGJ,iBAAiB,CAACK,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKH,IAAI,CAAC,CAAA;AAC1D,SAAA;AAEAJ,QAAAA,oBAAoB,CAACK,UAAU,EAAgBX,KAAK,CAAC,CAAA;AACvD,OAAC,MAAM,IAAI,OAAOK,QAAQ,KAAK,UAAU,EAAE;AACzCA,QAAAA,QAAQ,CAACH,OAAO,EAAEF,KAAK,CAAC,CAAA;AAC1B,OAAA;KACD,CAAA,CAAA;AAAA,GAAA;EA5CD,IAAIO,iBAAiBA,GAAG;AACtB,IAAA,OAAQ,IAAI,CAACT,IAAI,CAACgB,iBAAiB,IAAI,EAAE,CAAA;AAC3C,GAAA;EAEA,IAAIN,kBAAkBA,GAAG;AACvB,IAAA,OAAQ,IAAI,CAACV,IAAI,CAACgB,iBAAiB,IAAI,EAAE,CAAA;AAC3C,GAAA;EAEA,IAAIC,gBAAgBA,GAAG;AACrB,IAAA,MAAML,IAAI,GAAG,IAAI,CAACZ,IAAI,CAACY,IAAc,CAAA;AAErC,IAAA,IAAI,IAAI,CAACZ,IAAI,CAACW,yBAAyB,EAAE;AACvC,MAAA,OAAO,IAAI,CAACD,kBAAkB,CAACE,IAAI,CAAC,KAAK,IAAI,CAAA;AAC/C,KAAA;AAEA,IAAA,OAAO,IAAI,CAACH,iBAAiB,CAACS,QAAQ,CAACN,IAAI,CAAC,CAAA;AAC9C,GAAA;AA6BF,CAAA;AAACO,oBAAA,CAAAC,QAAA,EA9CoBvB,cAAc,CAAA;;;;"}